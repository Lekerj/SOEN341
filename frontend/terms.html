<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Booking Terms and Conditions - ConEvents</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- Header / Navbar (matches homepage) -->
  <nav class="navbar">
    <div class="navbar-container">
      <a href="index.html" class="navbar-logo">üé´ ConEvents</a>
      <ul class="navbar-menu">
        <!-- These take you back to the homepage and its sections -->
        <li><a href="index.html">Home</a></li>
        <li><a href="browse.html">Browse</a></li>
        <li><a href="profile.html">Profile</a></li>

        <!-- Go to the About page -->
        <li><a href="about.html">About</a></li>

        <!-- Auth buttons (same look as home) -->
        <li id="authLinks">
          <a href="login.html" class="btn btn-primary btn-sm">Login</a>
          <a href="register.html" class="btn btn-primary btn-sm">Sign Up</a>
        </li>

        <!-- Logged-in state -->
        <li id="userLinks" style="display:none;">
          <span id="welcomeMessage" class="text-muted"></span>
          <button onclick="logout()" class="btn btn-secondary btn-sm">Logout</button>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="main-content">
    <div class="container container-md">
      <div class="card">
        <div class="card-header text-center">
          <h1 class="card-title">Booking Terms and Conditions</h1>
          <p class="card-subtitle">Last updated: October 8, 2025</p>
        </div>

        <div class="card-body">
          <section class="mb-3" id="introduction">
            <h2 class="text-left mb-2">1. Introduction</h2>
            <p class="mb-2">
              Bookings made through our website, and our your rights and obligations in relation to such bookings, are
              governed by these terms and conditions.
            </p>
            <p class="mb-2">
              You will have to agree to these terms and conditions before you place an order on our website.
            </p>
            <p class="mb-2">
              Any statutory rights that you may have as a consumer are not affected by these terms and conditions.
            </p>
          </section>

          <section class="mb-3" id="interpretation">
            <h2 class="text-left mb-2">2. Interpretation</h2>
            <p class="mb-2">
              In these terms and conditions:
            </p>
            <ul class="mb-2">
              <li> (a) ‚Äúwe‚Äù means ConEvents (and ‚Äúus‚Äù and ‚Äúour‚Äù should be construed accordingly);</li>
              <li> (b) ‚Äúyou‚Äù means our customer or prospective customer under these terms and conditions (and ‚Äúyour‚Äù
                should be construed accordingly);</li>
              <li> (c) ‚Äúbooking‚Äù means a booking in respect of the chosen event(s), which may be made by you under these
                terms and conditions;</li>
              <li> (d) ‚Äúforce majeure event‚Äù means an event that is, or a series of related events that are, beyond our
                reasonable control.</li>
            </ul>
          </section>

          <section class="mb-3" id="order-process">
            <h2 class="text-left mb-2">3. Order process</h2>
            <p class="mb-2">
              The advertising of bookings on our website constitutes an ‚Äúinvitation to treat‚Äù rather than a contractual
              offer.
            </p>
            <p class="mb-2">
              No contract will come into force between you and ConEvent unless and until we accept your order.
            </p>
            <p class="mb-2">
              To make a booking through our website, the following steps must be taken:
            <ul class="mb-2">
              <li>You must click ‚Äúbuy tickets‚Äù in relation to the relevant event;</li>
              <li>If you are a new customer, you must create an account with us and log in; if you are an existing
                customer, you must enter your login details;</li>
              <li>Once you are logged in, you must consent to these terms and conditions; you will then be transferred
                to our payment service provider‚Äôs website, and our payment service provider will handle your payment;
              </li>
              <li>We will then send you an initial acknowledgement; and finally, we will either send you an order
                confirmation (at which point your order will become a binding contract) or we will confirm by email that
                we are unable to meet your order.</li>
            </ul>
            </p>
            <p class="mb-2">
              You will have the opportunity to identify and correct input errors prior to making your order by
              contacting us.
            </p>
          </section>

          <section class="mb-3" id="prices">
            <h2 class="text-left mb-2">4. Prices</h2>
            <p class="mb-2">
              Our prices are quoted on our website.
            </p>
            <p class="mb-2">
              We will from time to time change the prices quoted on our website, but this will not affect contracts that
              have previously come into force.
            </p>
          </section>

          <div class="text-center mt-3">
            <button class="btn btn-secondary" onclick="window.history.back()">‚Üê Go Back</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer (shared across pages) -->
  <footer class="footer">
    <div class="footer-links">
      <a href="about.html">About Us</a>
      <a href="browse.html">Events</a>
      <a href="privacy.html">Privacy Policy</a>
      <a href="terms.html">Terms of Service</a>
      <a href="contact.html">Contact</a>
    </div>
    <p>&copy; 2025 ConEvents - Concordia University. All rights reserved.</p>
  </footer>

  <script type="module">
    import { getApiBase } from './utils/api.js';
    // Check authentication status (match index.html)
    window.addEventListener('DOMContentLoaded', async () => {
      const user = localStorage.getItem('user');
      if (user) {
        try {
          const userData = JSON.parse(user);
          // Verify session is still valid
          const response = await fetch(`${getApiBase()}/api/auth/profile`, {
            credentials: 'include'
          });
          if (response.ok) {
            // User is logged in
            document.getElementById('authLinks').style.display = 'none';
            document.getElementById('userLinks').style.display = 'flex';
            document.getElementById('userLinks').style.gap = '1rem';
            document.getElementById('userLinks').style.alignItems = 'center';
            document.getElementById('welcomeMessage').textContent = `Welcome, ${userData.name || userData.username || 'User'}!`;
          } else {
            // Session expired
            localStorage.removeItem('user');
          }
        } catch (error) {
          console.error('Error checking session:', error);
          localStorage.removeItem('user');
        }
      } else {
        document.getElementById('authLinks').style.display = '';
        document.getElementById('userLinks').style.display = 'none';
        document.getElementById('welcomeMessage').textContent = '';
      }
    });

    // Logout function (match index.html)
    async function logout() {
      const confirmLogout = confirm('Are you sure you want to log out?');
      if (!confirmLogout) return;
      try {
        const response = await fetch(`${getApiBase()}/api/auth/logout`, {
          method: 'POST',
          credentials: 'include'
        });
        if (response.ok) {
          localStorage.removeItem('user');
          window.location.reload();
        } else {
          alert('Logout failed. Please try again.');
        }
      } catch (error) {
        console.error('Logout error:', error);
        alert('An error occurred during logout.');
      }
    }

    // Login detection and navbar update
    document.addEventListener('DOMContentLoaded', function () {
      const user = JSON.parse(localStorage.getItem('user') || 'null');
      const authLinks = document.getElementById('authLinks');
      const userLinks = document.getElementById('userLinks');
      const welcomeMessage = document.getElementById('welcomeMessage');
      if (user && user.username) {
        if (authLinks) authLinks.style.display = 'none';
        if (userLinks) userLinks.style.display = '';
        if (welcomeMessage) welcomeMessage.textContent = `Welcome, ${user.username}!`;
      } else {
        if (authLinks) authLinks.style.display = '';
        if (userLinks) userLinks.style.display = 'none';
        if (welcomeMessage) welcomeMessage.textContent = '';
      }
    });
    // Removed duplicate logout definition; using the async logout above
  </script>
</body>

</html>